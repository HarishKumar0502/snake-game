<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Snake — Simple Web Game</title>
  <style>
    :root{
      --bg: #0f1724;
      --panel: #071021;
      --accent: #00d1b2;
      --muted: #98a0b3;
      --danger: #ff6b6b;
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#e6eef8;background:linear-gradient(180deg,#071028 0%, #071021 100%);}
    .wrap{min-height:100%;display:grid;place-items:center;padding:28px}
    .card{width:820px;max-width:100%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(2,6,23,0.6);display:grid;grid-template-columns:1fr 300px;gap:18px}
    .left{display:flex;flex-direction:column;align-items:center;padding:12px}
    canvas{background:linear-gradient(180deg,#081425,#04101a);border-radius:12px;box-shadow:inset 0 2px 12px rgba(0,0,0,0.6);width:100%;height:100%;max-height:640px}
    .controls{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:var(--muted);cursor:pointer}
    button.primary{background:var(--accent);border-color:transparent;color:#021019}
    .right{padding:8px 6px;display:flex;flex-direction:column;gap:10px}
    .panel{background:var(--panel);padding:12px;border-radius:12px}
    h1{margin:0;font-size:18px}
    .meta{display:flex;align-items:center;justify-content:space-between;margin-top:6px}
    .stat{display:flex;flex-direction:column}
    .stat strong{font-size:20px;color:var(--accent);display:block}
    .muted{color:var(--muted);font-size:13px}
    .hint{font-size:13px;color:var(--muted);margin-top:8px}
    .footer{margin-top:8px;font-size:12px;color:var(--muted);}
    .kbd{display:inline-block;padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);font-weight:600}
    @media(max-width:900px){.card{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-label="Snake game">
      <div class="left">
        <canvas id="game" width="640" height="640" aria-label="Snake game canvas"></canvas>
        <div class="controls">
          <button id="startBtn" class="primary">Start</button>
          <button id="pauseBtn">Pause</button>
          <button id="speedBtn">Speed ×1</button>
          <button id="resetBtn">Reset</button>
        </div>
        <div class="hint">Use <span class="kbd">Arrow Keys</span> or <span class="kbd">W A S D</span>. On mobile — swipe to control.</div>
      </div>

      <div class="right">
        <div class="panel">
          <h1>Snake — Classic</h1>
          <div class="meta">
            <div class="stat">
              <span class="muted">Score</span>
              <strong id="score">0</strong>
            </div>
            <div class="stat">
              <span class="muted">High Score</span>
              <strong id="hi">0</strong>
            </div>
            <div class="stat">
              <span class="muted">Speed</span>
              <strong id="spd">1×</strong>
            </div>
          </div>
          <p class="hint">Eat the green apples to grow. Don't run into walls or yourself!</p>
        </div>

        <div class="panel">
          <div class="muted">Controls & Tips</div>
          <ul style="margin:8px 0 0 16px;color:var(--muted)">
            <li>Arrow keys / W A S D to move.</li>
            <li>Pause to take a break, Reset to restart immediately.</li>
            <li>Speed increases difficulty and score rate.</li>
          </ul>
        </div>

        <div class="panel">
          <div class="muted">Made for you</div>
          <p class="footer">Copy this file as <code>index.html</code> and open it in your browser to play. Want features added? Ask me — I'll update it.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Basic snake game — single file
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resetBtn = document.getElementById('resetBtn');
    const speedBtn = document.getElementById('speedBtn');
    const scoreEl = document.getElementById('score');
    const hiEl = document.getElementById('hi');
    const spdEl = document.getElementById('spd');

    const gridSize = 20; // cells per row/col
    const cell = canvas.width / gridSize;

    let snake, dir, apple, running, loopId;
    let baseInterval = 120; // ms
    let speedMultiplier = 1;
    let highScore = parseInt(localStorage.getItem('snake_hi')||'0',10);
    hiEl.textContent = highScore;

    function resetGame(){
      snake = [{x:10,y:10},{x:9,y:10},{x:8,y:10}];
      dir = {x:1,y:0};
      placeApple();
      running = false;
      updateScore(0);
      speedMultiplier = 1;
      updateSpeedDisplays();
      clearLoop();
      draw();
    }

    function updateScore(s){
      scoreEl.textContent = s;
      const sNum = parseInt(s,10) || 0;
      if(sNum > highScore){
        highScore = sNum;
        hiEl.textContent = highScore;
        localStorage.setItem('snake_hi', highScore);
      }
    }

    function updateSpeedDisplays(){
      speedBtn.textContent = `Speed ×${speedMultiplier}`;
      spdEl.textContent = `${speedMultiplier}×`;
    }

    function placeApple(){
      while(true){
        const ax = Math.floor(Math.random()*gridSize);
        const ay = Math.floor(Math.random()*gridSize);
        if(!snake.some(s=>s.x===ax&&s.y===ay)){
          apple = {x:ax,y:ay};
          return;
        }
      }
    }

    function clearLoop(){
      if(loopId) cancelAnimationFrame(loopId);
      loopId = null;
    }

    function gameTick(){
      // advance snake
      const head = {x:snake[0].x + dir.x, y:snake[0].y + dir.y};

      // wall collision
      if(head.x < 0 || head.x >= gridSize || head.y < 0 || head.y >= gridSize){
        return gameOver();
      }
      // self collision
      if(snake.some(s => s.x === head.x && s.y === head.y)) return gameOver();

      snake.unshift(head);

      // eat apple
      if(head.x === apple.x && head.y === apple.y){
        // grow and place new apple
        placeApple();
        updateScore(parseInt(scoreEl.textContent||0,10)+10);
      } else {
        snake.pop();
      }
      draw();
    }

    let lastTime = 0;
    function loop(time){
      if(!running) return;
      const interval = baseInterval / speedMultiplier;
      if(time - lastTime >= interval){
        lastTime = time;
        gameTick();
      }
      loopId = requestAnimationFrame(loop);
    }

    function start(){
      if(running) return;
      running = true;
      lastTime = 0;
      loopId = requestAnimationFrame(loop);
    }

    function pause(){
      running = false;
      clearLoop();
    }

    function gameOver(){
      running = false;
      clearLoop();
      navigator.vibrate && navigator.vibrate(150);
      ctx.save();
      ctx.fillStyle = 'rgba(0,0,0,0.6)';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = '#fff';
      ctx.font = '28px system-ui';
      ctx.textAlign = 'center';
      ctx.fillText('Game Over', canvas.width/2, canvas.height/2 - 10);
      ctx.font = '16px system-ui';
      ctx.fillText('Press Start or Reset to play again', canvas.width/2, canvas.height/2 + 20);
      ctx.restore();
    }

    function draw(){
      // clear
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // grid background
      for(let y=0;y<gridSize;y++){
        for(let x=0;x<gridSize;x++){
          ctx.fillStyle = (x+y)%2? 'rgba(255,255,255,0.01)' : 'rgba(255,255,255,0.02)';
          ctx.fillRect(x*cell,y*cell,cell,cell);
        }
      }

      // apple
      ctx.fillStyle = '#35d07f';
      roundRect(ctx, apple.x*cell + 4, apple.y*cell + 4, cell-8, cell-8, 6);

      // snake
      for(let i=0;i<snake.length;i++){
        const s = snake[i];
        const t = i===0 ? '#00d1b2' : '#66f2d8';
        ctx.fillStyle = t;
        roundRect(ctx, s.x*cell+1, s.y*cell+1, cell-2, cell-2, 6);
      }

      // corner score small
      ctx.fillStyle = 'rgba(255,255,255,0.06)';
      ctx.fillRect(6,6,110,34);
      ctx.fillStyle = '#fff';
      ctx.font = '14px system-ui';
      ctx.fillText('Score: '+scoreEl.textContent, 16, 28);
    }

    function roundRect(ctx,x,y,w,h,r){
      ctx.beginPath();
      ctx.moveTo(x+r,y);
      ctx.arcTo(x+w,y,x+w,y+h,r);
      ctx.arcTo(x+w,y+h,x,y+h,r);
      ctx.arcTo(x,y+h,x,y,r);
      ctx.arcTo(x,y,x+w,y,r);
      ctx.closePath();
      ctx.fill();
    }

    // Input handling
    window.addEventListener('keydown',e=>{
      const k = e.key;
      if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(k) || ['w','a','s','d','W','A','S','D'].includes(k)){
        e.preventDefault();
      }
      if(k === 'ArrowUp' || k==='w' || k==='W') tryChangeDir(0,-1);
      if(k === 'ArrowDown' || k==='s' || k==='S') tryChangeDir(0,1);
      if(k === 'ArrowLeft' || k==='a' || k==='A') tryChangeDir(-1,0);
      if(k === 'ArrowRight' || k==='d' || k==='D') tryChangeDir(1,0);
      if(k === ' '){ if(running) pause(); else start(); }
    });

    function tryChangeDir(x,y){
      // prevent opposite turn
      if(dir.x === -x && dir.y === -y) return;
      dir = {x,y};
      if(!running) { draw(); }
    }

    // Touch / swipe support
    let touchStart = null;
    canvas.addEventListener('touchstart', e=>{
      const t = e.touches[0];
      touchStart = {x:t.clientX,y:t.clientY};
    },{passive:true});
    canvas.addEventListener('touchmove', e=>{ e.preventDefault(); },{passive:false});
    canvas.addEventListener('touchend', e=>{
      if(!touchStart) return;
      const t = e.changedTouches[0];
      const dx = t.clientX - touchStart.x;
      const dy = t.clientY - touchStart.y;
      if(Math.abs(dx) > Math.abs(dy)){
        if(dx > 20) tryChangeDir(1,0);
        else if(dx < -20) tryChangeDir(-1,0);
      } else {
        if(dy > 20) tryChangeDir(0,1);
        else if(dy < -20) tryChangeDir(0,-1);
      }
      touchStart = null;
    },{passive:true});

    // Buttons
    startBtn.addEventListener('click', ()=> start());
    pauseBtn.addEventListener('click', ()=> { if(running) pause(); else start(); });
    resetBtn.addEventListener('click', ()=> { resetGame(); start(); });
    speedBtn.addEventListener('click', ()=>{
      speedMultiplier = speedMultiplier >= 4 ? 1 : speedMultiplier + 1;
      updateSpeedDisplays();
    });

    // initial
    resetGame();

    // keep canvas crisp on high DPI
    function resizeCanvasToDisplaySize(){
      const ratio = window.devicePixelRatio || 1;
      if(canvas.width !== canvas.clientWidth*ratio || canvas.height !== canvas.clientHeight*ratio){
        canvas.width = Math.floor(canvas.clientWidth * ratio);
        canvas.height = Math.floor(canvas.clientHeight * ratio);
        // recalc cell size
        const shortest = Math.min(canvas.width, canvas.height);
        // keep grid square
      }
    }
    // call periodically
    const ro = new ResizeObserver(()=>{
      // force redraw to adapt sizes
      draw();
    });
    ro.observe(canvas);

    // friendly focus
    canvas.tabIndex = 0;
    canvas.addEventListener('click',()=>canvas.focus());
  </script>
</body>
</html>
